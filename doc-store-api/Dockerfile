FROM golang:1.20
WORKDIR /app

COPY go.mod ./
RUN go mod download

COPY . .
RUN go build -o /doc-store-api ./cmd

ARG OBJ_STOR_BASE_URL
ENV OBJ_STOR_BASE_URL=$OBJ_STOR_BASE_URL

ARG OBJ_STOR_REGION
ENV OBJ_STOR_REGION=$OBJ_STOR_REGION

ARG OBJ_STOR_KEYID
ENV OBJ_STOR_KEYID=$OBJ_STOR_KEYID

ARG OBJ_STOR_KEY
ENV OBJ_STOR_KEY=$OBJ_STOR_KEY

ARG OBJ_STOR_BUCKET_NAME
ENV OBJ_STOR_BUCKET_NAME=$OBJ_STOR_BUCKET_NAME

EXPOSE 4200
CMD ["/tg-bot-api"]